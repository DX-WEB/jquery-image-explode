"use strict";!function(t){t.fn.explode=function(o){function a(t,o){return parseInt(Math.random()*(o+1-t),10)+t}function i(){var t=void 0;t=d?Math.floor(w/e):Math.ceil(w/e);for(var o=void 0,i=[],r=function(t){function r(t){var o=s;if(s+=t,i.push({left:o,top:c,width:t}),u)for(var a=1;a<parseInt(e/t);a++)i.push({left:o,top:c+a*t,width:t})}var s=0,d=0,c=t*e;do o&&(r(o),d++),o=a(n,e);while(g>s+o);g-s>=n&&r(g-s)},s=0;s<t;s++)r(s);return i}var r=o.minWidth,n=void 0===r?3:r,e=o.maxWidth,s=o.omitLastLine,d=void 0===s||s,c=o.radius,h=void 0===c?8:c,l=o.release,p=void 0===l||l,f=(o.recycle,o.fill),u=void 0===f||f,m=this,v=arguments;m.each(function(){var o=t(this);"IMG"===o.prop("tagName")&&(o.prop("complete")||o.on("load",function(){o.explode.apply(o,v)}))});var g=m.width(),w=m.height(),M=Math.min(g,w),x=void 0;x="IMG"===m.prop("tagName")?{kind:"image",src:m.attr("src")}:{kind:"color",color:m.css("background-color")},e||(e=M/4);var b=t("<div></div>",{class:"explode-wrapper"}),k=["width","height","margin-top","margin-right","margin-bottom","margin-left","position","top","right","bottom","left"];k.forEach(function(t){b.css(t,m.css(t))}),"static"===b.css("position")&&b.css("position","relative");m.css("display");m.css("display","none"),m.after(b);var y=i();y.forEach(function(o){var a=t("<div></div>",{}),i=o.left,r=o.top,n=o.width;switch(a.css({width:n,height:n,position:"absolute",left:i,top:r,"background-size":g+"px "+w+"px","background-position":-i+"px "+-r+"px"}),x.kind){case"image":a.css("background-image",'url("'+x.src+'")');break;case"color":a.css("background-color",""+x.color)}o.$dom=a,b.append(a)});var I=y.length,$=720;y.forEach(function(t,o){t.$dom.css("transition","0.3s all ease-out");(Math.random()+2)*t.width;t.finalAngle=(Math.random()*$-$/2)/((Math.random()+2)*t.width)*10;var a=t.left+t.width/2-g/2,i=t.top+t.width/2-w/2;0===a&&(a=o%2?-1:1),0===i&&(i=o%4<2?-1:1);var r=Math.sqrt(a*a+i*i),n=.3,s=(t.width,((1-n)*(1-t.width/e)+n)*Math.random()),d=(h-r)*s+r,c=r*r;t.translateX=(d-r)*Math.sqrt((c-i*i)/c)*(a>0?1:-1),t.translateY=(d-r)*Math.sqrt((c-a*a)/c)*(i>0?1:-1),p&&setTimeout(function(){t.$dom.fadeOut({done:function(){t.$dom.remove(),I--,I||(m.fadeIn(),b.remove())}})},3e3/s)}),setTimeout(function(){for(var t in y){var o=y[t];o.$dom.css("transform","translate("+o.translateX+"px,"+o.translateY+"px) rotate("+o.finalAngle+"deg)")}})}}(jQuery);