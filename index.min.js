"use strict";!function(t){t.fn.explode=function(o){function i(t,o){return parseInt(Math.random()*(o+1-t),10)+t}function a(){var t=void 0;t=d?Math.floor(x/s):Math.ceil(x/s);for(var o=void 0,a=[],n=function(t){function n(t){var o=r;if(r+=t,a.push({left:o,top:d,width:t}),m)for(var i=1;i<parseInt(s/t);i++)a.push({left:o,top:d+i*t,width:t})}var r=0,c=0,d=t*s;do o&&(n(o),c++),o=i(e,s);while(w>r+o);w-r>=e&&n(w-r)},r=0;r<t;r++)n(r);return a}function n(t){switch(b.kind){case"image":t.css("background-image",'url("'+b.src+'")');break;case"color":t.css("background-color",""+b.color)}}var r=o.minWidth,e=void 0===r?3:r,s=o.maxWidth,c=o.omitLastLine,d=void 0===c||c,l=o.radius,h=void 0===l?8:l,p=o.release,f=void 0===p||p,u=(o.recycle,o.fill),m=void 0===u||u,v=this,g=arguments;v.each(function(){var o=t(this);"IMG"===o.prop("tagName")&&(o.prop("complete")||o.on("load",function(){o.explode.apply(o,g)}))});var w=v.width(),x=v.height(),M=Math.min(w,x),b=void 0;b="IMG"===v.prop("tagName")?{kind:"image",src:v.attr("src")}:{kind:"color",color:v.css("background-color")},s||(s=M/4);var k=t("<div></div>",{class:"explode-wrapper"}),$=["width","height","margin-top","margin-right","margin-bottom","margin-left","position","top","right","bottom","left","float"];$.forEach(function(t){k.css(t,v.css(t))}),"static"===k.css("position")&&k.css("position","relative");var I=(v.css("display"),a());I.forEach(function(o){var i=t("<div></div>",{}),a=o.left,r=o.top,e=o.width;i.css({width:e,height:e,position:"absolute",left:a,top:r,"background-size":w+"px "+x+"px","background-position":-a+"px "+-r+"px"}),n(i),o.$dom=i,k.append(i)});var y=I.length,q=720;I.forEach(function(t,o){t.$dom.css("transition","0.3s all ease-out");(Math.random()+2)*t.width;t.finalAngle=(Math.random()*q-q/2)/((Math.random()+2)*t.width)*10;var i=t.left+t.width/2-w/2,a=t.top+t.width/2-x/2;0===i&&(i=o%2?-1:1),0===a&&(a=o%4<2?-1:1);var n=Math.sqrt(i*i+a*a),r=.3,e=(t.width,((1-r)*(1-t.width/s)+r)*Math.random()),c=(h-n)*e+n,d=n*n;t.translateX=(c-n)*Math.sqrt((d-a*a)/d)*(i>0?1:-1),t.translateY=(c-n)*Math.sqrt((d-i*i)/d)*(a>0?1:-1),f&&setTimeout(function(){t.$dom.fadeOut({done:function(){t.$dom.remove(),y--,y||(v.fadeIn(),k.remove())}})},3e3/e)}),I[0].$dom.on("transitionstart",function(){console.log(1)}),v.hide(),v.after(k),k.css({"background-size":w+"px "+x+"px","background-position":"0px 0px"}),n(k),setTimeout(function(){for(var t in I){var o=I[t];o.$dom.css("transform","translate("+o.translateX+"px,"+o.translateY+"px) rotate("+o.finalAngle+"deg)")}setTimeout(function(){k.css("background-image","none")})})}}(jQuery);