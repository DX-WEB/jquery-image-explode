"use strict";function _toConsumableArray(t){if(Array.isArray(t)){for(var a=0,o=Array(t.length);a<t.length;a++)o[a]=t[a];return o}return Array.from(t)}var _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol?"symbol":typeof t};!function(t){var a="explode-wrapper";t.fn.explodeRestore=function(){this.each(function(){var o=t(this);o.show(),o.next().filter("."+a).remove()})},t.fn.explode=function(o){function n(t){Date.now();X||setTimeout(function(){M&&setTimeout(function(){for(var t in Q){var a=Q[t];a.$dom.css("transform","")}setTimeout(function(){q.show(),L.hide()},Y)},2*Y)})}function e(t){switch(z.kind){case"image":t.css("background-image",'url("'+z.src+'")');break;case"color":t.css("background-color",""+z.color)}}function i(t){function a(){var t=Date.now(),o=(t-e)/1e3/1;e=t,r+=P*o*3e3,J.clearRect(0,0,F,G),Q.forEach(function(t,a){var n;t.biasx+=t.vx*o,t.biasy+=(t.vy+r)*o,t.biasy>t.transYMax&&(t.land||(t.land=1,i--,t.vx=0,t.vy=0),t.biasy=t.transYMax);var e=(t.left,t.top,t.width),s=t.height;J.save(),J.translate(t.biasx,t.biasy),J.rotate(t.finalAngleRad),(n=J).drawImage.apply(n,[q[0]].concat(_toConsumableArray(t.naturalParams),[-e/2,-s/2,e,s])),J.restore()}),i&&window.requestAnimationFrame(a)}function o(){var a=Date.now(),e=(a-n)/Y;return e>1?void(t&&t()):(J.clearRect(0,0,F,G),e=Math.sin(e*Math.PI/2),Q.forEach(function(t,a){var o,n=(t.left,t.top,t.width),i=t.height;J.save(),J.translate(t.translateX0+t.translateX*e,t.translateY0+t.translateY*e),J.rotate(t.finalAngleRad*e),(o=J).drawImage.apply(o,[q[0]].concat(_toConsumableArray(t.naturalParams),[-n/2,-i/2,n,i])),J.restore()}),void window.requestAnimationFrame(o))}var n=Date.now(),e=n,i=Q.length,r=0;P?(Q.forEach(function(t,a){t.vx=t.translateX/Y*1e3,t.vy=t.translateY/Y*1e3,t.biasx=t.translateX0,t.biasy=t.translateY0,t.transYMax=G-t.height/2}),a()):o()}function r(t){Q.forEach(function(t,a){t.$dom.css("transition",Y+"ms all ease-out");var o=(t.finalDistance,t.x,t.y,t.distance,t.ratio);w&&setTimeout(function(){t.$dom.fadeOut({done:function(){t.$dom.remove(),Z--,Z||(q.css("display",O),q.fadeIn(),L.remove())}})},3e3/o)}),L.css({"background-size":S+"px "+j+"px","background-position":"0px 0px"}),e(L),setTimeout(function(){for(var a in Q){var o=Q[a];o.$dom.css("transform","translate("+o.translateX+"px,"+o.translateY+"px) rotate("+o.finalAngle+"deg)")}setTimeout(function(){L.css("background-image","none"),setTimeout(function(){t&&t()},Y)})},100)}function s(t,a){return parseInt(Math.random()*(a+1-t),10)+t}function c(){Q.forEach(function(t,a){var o=(Math.random()*T*2-T)/((Math.random()+2)*t.width)*10,n=o*(Math.PI/180),e=t.left+t.width/2-S/2,i=t.top+t.width/2-j/2;0===e&&(e=a%2?-1:1),0===i&&(i=a%4<2?-1:1);var r=Math.sqrt(e*e+i*i),s=((1-H)*(1-(t.width-h)/(_-h))+H)*Math.random();s=1-(1-s)*(1-y/m);var c=(m-r)*s+r,l=r*r,d=(c-r)*Math.sqrt((l-i*i)/l)*(e>0?1:-1),f=(c-r)*Math.sqrt((l-e*e)/l)*(i>0?1:-1),u=(F-S)/2+t.left+t.width/2,p=(G-j)/2+t.top+t.height/2;Object.assign(t,{finalDistance:c,ratio:s,x:e,y:i,distance:r,translateX:d,translateY:f,translateX0:u,translateY0:p,finalAngleRad:n,finalAngle:o})})}function l(){function t(t){function a(t){var a=n;if(n+=t,o.push({left:a,top:e,width:t,height:t}),k)for(var i=1;i<parseInt(_/t);i++)o.push({left:a,top:e+i*t,width:t,height:t})}var n=0,e=t*_,i=void 0;do i&&a(i),i=s(h,_);while(S>n+i);S-n>=h&&a(S-n)}var a=void 0;a=p?Math.floor(j/_):Math.ceil(j/_);for(var o=[],n=0;n<a;n++)t(n);return o}o&&"object"===("undefined"==typeof o?"undefined":_typeof(o))||(o={});var d=o,f=d.minWidth,h=void 0===f?3:f,u=d.omitLastLine,p=void 0!==u&&u,v=d.radius,m=void 0===v?80:v,g=d.minRadius,y=void 0===g?20:g,b=d.release,w=void 0===b||b,x=d.recycle,M=void 0===x||x,A=d.fill,k=void 0===A||A,I=d.explodeTime,Y=void 0===I?300:I,E=d.maxAngle,T=void 0===E?360:E,R=d.canvas,X=void 0===R||R,D=d.gravity,P=void 0!==D&&D,$=o,_=$.maxWidth,q=this,C=arguments;q.each(function(){var a=t(this);"IMG"===a.prop("tagName")&&(a.prop("complete")||a.on("load",function(){a.explode.apply(a,C)}))});var S=q.width(),j=q.height(),W=Math.min(S,j),z=void 0;z="IMG"===q.prop("tagName")?{kind:"image",src:q.attr("src")}:{kind:"color",color:q.css("background-color")};var F=Math.max(S,2*m),G=Math.max(j,2*m);_||(_=W/4);var L=t("<div></div>",{class:a}),N=["width","height","margin-top","margin-right","margin-bottom","margin-left","position","top","right","bottom","left","float","display"];N.forEach(function(t){L.css(t,q.css(t))}),"static"===L.css("position")&&L.css("position","relative");var O=q.css("display"),H=.3,Q=l();c();var B=void 0,J=void 0,K=q[0],U=K.naturalWidth,V=K.naturalHeight;X?!function(){B=t("<canvas></canvas>"),B.css({position:"absolute",left:-F/2,right:-F/2,top:-G/2,bottom:-G/2,margin:"auto",width:F,height:G}),B.attr({width:F,height:G}),L.append(B);var a=S/U,o=j/V;Q.forEach(function(t,n){var e,i=t.left,r=t.top,s=t.width,c=t.height;switch(J=B[0].getContext("2d"),t.naturalParams=[i/a,r/o,s/a,c/o],z.kind){case"image":(e=J).drawImage.apply(e,[q[0]].concat(_toConsumableArray(t.naturalParams),[(F-S)/2+i,(G-j)/2+r,s,c]));break;case"color":}})}():Q.forEach(function(a){var o=t("<div></div>",{}),n=a.left,i=a.top,r=a.width;o.css({width:r,height:r,position:"absolute",left:n,top:i,"background-repeat":"no-repeat","background-size":S+"px "+j+"px","background-position":-n+"px "+-i+"px"}),e(o),a.$dom=o,L.append(o)});var Z=Q.length;q.hide(),q.after(L),X?i(n):r(n)}}(window.jQuery);