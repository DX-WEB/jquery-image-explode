"use strict";function _toConsumableArray(t){if(Array.isArray(t)){for(var a=0,o=Array(t.length);a<t.length;a++)o[a]=t[a];return o}return Array.from(t)}var _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol?"symbol":typeof t};!function(t){var a="explode-wrapper";t.fn.explodeRestore=function(){this.each(function(){var o=t(this);o.show(),o.next().filter("."+a).remove()})},t.fn.explode=function(o){function n(t){var a=Date.now();E?X&&!function(){var o=function a(){var o=Date.now(),s=(o-r)/A;return r=o,s>1?void(t&&t()):(e+=n*s,Q.clearRect(0,0,W,z),s=Math.sin(s*Math.PI/2),O.forEach(function(t,a){var o,n=e,r=z-t.height/2;t.translateY0+t.translateY+e>r&&(t.land||(t.land=1,i--),n=r-t.translateY-t.translateY0);var s=(t.left,t.top,t.width),c=t.height;switch(Q.save(),j.kind){case"image":Q.translate(t.translateX0+t.translateX,t.translateY0+t.translateY+n),Q.rotate(t.finalAngleRad),(o=Q).drawImage.apply(o,[$[0]].concat(_toConsumableArray(t.naturalParams),[-s/2,-c/2,s,c]));break;case"color":}Q.restore()}),n+=10*X,void(i&&window.requestAnimationFrame(a)))},n=0,e=0,r=a,i=O.length;o()}():setTimeout(function(){b&&setTimeout(function(){for(var t in O){var a=O[t];a.$dom.css("transform","")}setTimeout(function(){$.show(),F.hide()},A)},2*A)})}function e(t){switch(j.kind){case"image":t.css("background-image",'url("'+j.src+'")');break;case"color":t.css("background-color",""+j.color)}}function r(t){function a(){var n=Date.now(),e=(n-o)/A;return e>1?void(t&&t()):(Q.clearRect(0,0,W,z),e=Math.sin(e*Math.PI/2),O.forEach(function(t,a){var o,n=(t.left,t.top,t.width),r=t.height;switch(Q.save(),j.kind){case"image":Q.translate(t.translateX0+t.translateX*e,t.translateY0+t.translateY*e),Q.rotate(t.finalAngleRad*e),(o=Q).drawImage.apply(o,[$[0]].concat(_toConsumableArray(t.naturalParams),[-n/2,-r/2,n,r]));break;case"color":}Q.restore()}),void window.requestAnimationFrame(a))}var o=Date.now();a()}function i(t){O.forEach(function(t,a){t.$dom.css("transition",A+"ms all ease-out");var o=(t.finalDistance,t.x,t.y,t.distance,t.ratio);w&&setTimeout(function(){t.$dom.fadeOut({done:function(){t.$dom.remove(),U--,U||($.css("display",L),$.fadeIn(),F.remove())}})},3e3/o)}),F.css({"background-size":q+"px "+C+"px","background-position":"0px 0px"}),e(F),setTimeout(function(){for(var a in O){var o=O[a];o.$dom.css("transform","translate("+o.translateX+"px,"+o.translateY+"px) rotate("+o.finalAngle+"deg)")}setTimeout(function(){F.css("background-image","none"),setTimeout(function(){t&&t()},A)})},100)}function s(t,a){return parseInt(Math.random()*(a+1-t),10)+t}function c(){O.forEach(function(t,a){var o=(Math.random()*Y*2-Y)/((Math.random()+2)*t.width)*10,n=o*(Math.PI/180),e=t.left+t.width/2-q/2,r=t.top+t.width/2-C/2;0===e&&(e=a%2?-1:1),0===r&&(r=a%4<2?-1:1);var i=Math.sqrt(e*e+r*r),s=((1-N)*(1-t.width/R)+N)*Math.random(),c=(v-i)*s+i,l=i*i,d=(c-i)*Math.sqrt((l-r*r)/l)*(e>0?1:-1),f=(c-i)*Math.sqrt((l-e*e)/l)*(r>0?1:-1),h=(W-q)/2+t.left+t.width/2,u=(z-C)/2+t.top+t.height/2;Object.assign(t,{finalDistance:c,ratio:s,x:e,y:r,distance:i,translateX:d,translateY:f,translateX0:h,translateY0:u,finalAngleRad:n,finalAngle:o})})}function l(){function t(t){function a(t){var a=n;if(n+=t,o.push({left:a,top:e,width:t,height:t}),k)for(var r=1;r<parseInt(R/t);r++)o.push({left:a,top:e+r*t,width:t,height:t})}var n=0,e=t*R,r=void 0;do r&&a(r),r=s(h,R);while(q>n+r);q-n>=h&&a(q-n)}var a=void 0;a=p?Math.floor(C/R):Math.ceil(C/R);for(var o=[],n=0;n<a;n++)t(n);return o}o&&"object"===("undefined"==typeof o?"undefined":_typeof(o))||(o={});var d=o,f=d.minWidth,h=void 0===f?3:f,u=d.omitLastLine,p=void 0!==u&&u,m=d.radius,v=void 0===m?8:m,g=d.release,w=void 0===g||g,y=d.recycle,b=void 0===y||y,x=d.fill,k=void 0===x||x,M=d.explodeTime,A=void 0===M?300:M,I=d.maxAngle,Y=void 0===I?360:I,T=d.canvas,E=void 0===T||T,P=d.gravity,X=void 0!==P&&P,D=o,R=D.maxWidth,$=this,_=arguments;$.each(function(){var a=t(this);"IMG"===a.prop("tagName")&&(a.prop("complete")||a.on("load",function(){a.explode.apply(a,_)}))});var q=$.width(),C=$.height(),S=Math.min(q,C),j=void 0;j="IMG"===$.prop("tagName")?{kind:"image",src:$.attr("src")}:{kind:"color",color:$.css("background-color")};var W=Math.max(q,2*v),z=Math.max(C,2*v);R||(R=S/4);var F=t("<div></div>",{class:a}),G=["width","height","margin-top","margin-right","margin-bottom","margin-left","position","top","right","bottom","left","float","display"];G.forEach(function(t){F.css(t,$.css(t))}),"static"===F.css("position")&&F.css("position","relative");var L=$.css("display"),N=.3,O=l();c();var H=void 0,Q=void 0,B=$[0],J=B.naturalWidth,K=B.naturalHeight;E?!function(){H=t("<canvas></canvas>"),H.css({position:"absolute",left:-W/2,right:-W/2,top:-z/2,bottom:-z/2,margin:"auto",width:W,height:z}),H.attr({width:W,height:z}),F.append(H);var a=q/J,o=C/K;O.forEach(function(t,n){var e,r=t.left,i=t.top,s=t.width,c=t.height;switch(Q=H[0].getContext("2d"),t.naturalParams=[r/a,i/o,s/a,c/o],j.kind){case"image":(e=Q).drawImage.apply(e,[$[0]].concat(_toConsumableArray(t.naturalParams),[(W-q)/2+r,(z-C)/2+i,s,c]));break;case"color":}})}():O.forEach(function(a){var o=t("<div></div>",{}),n=a.left,r=a.top,i=a.width;o.css({width:i,height:i,position:"absolute",left:n,top:r,"background-repeat":"no-repeat","background-size":q+"px "+C+"px","background-position":-n+"px "+-r+"px"}),e(o),a.$dom=o,F.append(o)});var U=O.length;$.hide(),$.after(F),E?r(n):i(n)}}(window.jQuery);