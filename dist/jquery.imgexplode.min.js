"use strict";function _toConsumableArray(t){if(Array.isArray(t)){for(var a=0,i=Array(t.length);a<t.length;a++)i[a]=t[a];return i}return Array.from(t)}var _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol?"symbol":typeof t};!function(t){var a="explode-wrapper";t.fn.explodeRestore=function(){this.each(function(){var i=t(this);i.show(),i.siblings().filter("."+a).remove()})},t.fn.explode=function(i){function n(){function t(){var o=Date.now(),e=o-a;O.clearRect(0,0,H,Q),J.forEach(function(t){var a;O.save();var o=t.width,r=t.height;O.translate(t.biasx,t.biasy),O.rotate(t.lastAngle||t.finalAngleRad),_&&(O.beginPath(),O.arc(0,0,o/2,0,2*Math.PI,!1),O.closePath(),O.clip());var s=void 0;s=e<t.time1?1:e>t.time2?0:1-(e-t.time1)/n,0!==s||t.released||(t.released=!0,i--),O.globalAlpha=s,(a=O).drawImage.apply(a,[W[0]].concat(_toConsumableArray(t.naturalParams),[-o/2,-r/2,o,r])),O.restore()}),i?window.requestAnimationFrame(t):cb()}var a=Date.now(),i=J.length,n=300;J.forEach(function(t){t.time1=1e3/(t.ratio*(k+1-t.width)/k+.1),t.time2=t.time1+n}),t()}function o(){}function e(t){function a(){var e=Date.now(),r=void 0,s=void 0;if(r=(e-n)/1e3,s=(e-i)/I,D)at+=D*r*300;else{if(s>1)return void(t&&t());r*=Math.cos(s*Math.PI/2)*Math.PI/2}n=e,O.clearRect(0,0,H,Q),J.forEach(function(t){var a;O.save();var i=t.width,n=t.height;t.land||(t.biasx+=t.vx*r,t.biasy+=(t.vy+at)*r,D&&t.biasy>t.transYMax&&(o--,t.land=!0,t.lastAngle=t.finalAngleRad*s,t.biasy=t.transYMax)),O.translate(t.biasx,t.biasy),t.lastAngle?O.rotate(t.lastAngle):O.rotate(t.finalAngleRad*s),_&&(O.beginPath(),O.arc(0,0,i/2,0,2*Math.PI,!1),O.closePath(),O.clip()),(a=O).drawImage.apply(a,[W[0]].concat(_toConsumableArray(t.naturalParams),[-i/2,-n/2,i,n])),O.restore()}),D&&!o?t():window.requestAnimationFrame(a)}var i=Date.now(),n=i,o=J.length;J.forEach(function(t,a){t.vx=t.translateX/I*1e3,t.vy=t.translateY/I*1e3,t.biasx=t.translateX0,t.biasy=t.translateY0,t.transYMax=Q/2+S-t.height/2}),a()}function r(t,a){return parseInt(Math.random()*(a+1-t),10)+t}function s(){J.forEach(function(t,a){var i=(Math.random()*E*2-E)/((Math.random()+2)*t.width)*10,n=i*(Math.PI/180),o=t.left+t.width/2-F/2,e=t.top+t.width/2-G/2;0===o&&(o=a%2?-1:1),0===e&&(e=a%4<2?-1:1);var r=Math.sqrt(o*o+e*e),s=((1-B)*(1-(t.width-d)/(k-d))+B)*Math.random();s=1-(1-s)*(1-g/m);var l=(m-r)*s+r,h=r*r,c=(l-r)*Math.sqrt((h-e*e)/h)*(o>0?1:-1),f=(l-r)*Math.sqrt((h-o*o)/h)*(e>0?1:-1),v=(H-F)/2+t.left+t.width/2,u=(Q-G)/2+t.top+t.height/2,p={finalDistance:l,ratio:s,x:o,y:e,distance:r,translateX:c,translateY:f,translateX0:v,translateY0:u,finalAngleRad:n,finalAngle:i};for(var a in p)t[a]=p[a]})}function l(){function t(t){function a(t){var a=n;if(n+=t,i.push({left:a,top:o,width:t,height:t}),A)for(var e=1;e<parseInt(k/t);e++)i.push({left:a,top:o+e*t,width:t,height:t})}var n=0,o=t*k,e=void 0;do e&&a(e),e=r(d,k);while(F>n+e);F-n>=d&&a(F-n)}var a=void 0;a=v?Math.floor(G/k):Math.ceil(G/k);for(var i=[],n=0;n<a;n++)t(n);return i}i&&"object"===("undefined"==typeof i?"undefined":_typeof(i))||(i={});var h=i,c=h.minWidth,d=void 0===c?3:c,f=h.omitLastLine,v=void 0!==f&&f,u=h.radius,m=void 0===u?80:u,p=h.minRadius,g=void 0===p?20:p,y=h.release,b=void 0===y||y,w=h.recycle,M=void 0===w||w,x=h.fill,A=void 0===x||x,P=h.explodeTime,I=void 0===P?300:P,R=h.maxAngle,E=void 0===R?360:R,Y=h.gravity,D=void 0===Y?0:Y,q=h.round,_=void 0!==q&&q,C=h.groundDistance,S=void 0===C?400:C,X=i,k=X.maxWidth,W=this,j=arguments;W.each(function(){var a=t(this);"IMG"===a.prop("tagName")&&(a.prop("complete")||a.on("load",function(){a.explode.apply(a,j)}))});var F=W.width(),G=W.height(),L=Math.min(F,G),N=void 0;N="IMG"===W.prop("tagName")?{kind:"image",src:W.attr("src")}:{kind:"color",color:W.css("background-color")};var H=Math.max(F,2*m),Q=Math.max(G,2*m,2*S);k||(k=L/4);var T=t("<div></div>",{class:a}),z=["width","height","margin-top","margin-right","margin-bottom","margin-left","position","top","right","bottom","left","float","display"];z.forEach(function(t){T.css(t,W.css(t))}),"static"===T.css("position")&&T.css("position","relative");var B=(W.css("display"),.3),J=l();s();var K=void 0,O=void 0,U=W[0],V=U.naturalWidth,Z=U.naturalHeight;K=t("<canvas></canvas>"),K.css({position:"absolute",left:-H/2,right:-H/2,top:-Q/2,bottom:-Q/2,margin:"auto",width:H,height:Q}),K.attr({width:H,height:Q}),T.append(K);var $=F/V,tt=G/Z;J.forEach(function(t,a){var i=t.left,n=t.top,o=t.width,e=t.height;O=K[0].getContext("2d"),t.naturalParams=[i/$,n/tt,o/$,e/tt]});J.length;W.hide(),W.after(T);var at=0;e(function(){b?n():M&&o()})}}(window.jQuery);