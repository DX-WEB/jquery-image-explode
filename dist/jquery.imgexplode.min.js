/*
 * jquery-image-explode 1.0.11
 * A jQuery explosion plugin.
 * https://github.com/blackmiaool/jquery-image-explode#readme
 *
 * Copyright 2015, blackmiaool
 * Released under the MIT license.
*/

"use strict";var _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t};!function(t){var a="explode-wrapper";t.fn.explodeRestore=function(){this.each(function(){var e=t(this),o=e.prop(a);o&&(o.replaceWith(e),e.prop(a,null))})},t.fn.explode=function(e){function o(t){function a(){var i=Date.now(),n=i-e;ot.clearRect(0,0,J,K),tt.forEach(function(t){ot.save();var a=t.width,e=t.height;ot.translate(t.biasx,t.biasy),ot.rotate(t.lastAngle||t.finalAngleRad),W&&(ot.beginPath(),ot.arc(0,0,a/2,0,2*Math.PI,!1),ot.closePath(),ot.clip());var i=void 0;i=n<t.time1?1:n>t.time2?0:1-(n-t.time1)/M,0!==i||t.released||(t.released=!0,o--),ot.globalAlpha=i,ot.drawImage(et[0],t.left,t.top,t.width,t.height,-a/2,-e/2,a,e),ot.restore()}),o?window.requestAnimationFrame(a):t&&t()}var e=Date.now(),o=tt.length;tt.forEach(function(t){t.time1=1e3/(t.ratio*(G+1-t.width)/G+.1),t.time2=t.time1+M}),a()}function i(){setTimeout(function(){n(function(){L.explodeRestore()},!0)},P)}function n(t,a){function e(){var r=Date.now(),s=void 0,c=void 0;if(s=(r-i)/1e3,c=(r-o)/E,a&&(c=1-c),z)lt+=z*s*300;else{if(c>1||c<0)return void(t&&t());s*=Math.cos(c*Math.PI/2)*Math.PI/2}a&&(s=-s),i=r,ot.clearRect(0,0,J,K),tt.forEach(function(t){ot.save();var a=t.width,e=t.height;t.land||(t.biasx+=t.vx*s,t.biasy+=(t.vy+lt)*s,z&&t.biasy>t.transYMax&&(n--,t.land=!0,t.lastAngle=t.finalAngleRad*c,t.biasy=t.transYMax)),ot.translate(t.biasx,t.biasy),t.lastAngle?ot.rotate(t.lastAngle):ot.rotate(t.finalAngleRad*c),W&&(ot.beginPath(),ot.arc(0,0,a/2,0,2*Math.PI,!1),ot.closePath(),ot.clip()),ot.drawImage(et[0],t.left,t.top,t.width,t.height,-a/2,-e/2,a,e),ot.restore()}),z&&!n?t():window.requestAnimationFrame(e)}var o=Date.now(),i=o,n=tt.length;a||tt.forEach(function(t){t.vx=t.translateX/E*1e3,t.vy=t.translateY/E*1e3,t.biasx=t.translateX0,t.biasy=t.translateY0,t.transYMax=K/2+j-t.height/2}),e()}function r(t,a){return parseInt(Math.random()*(a+1-t),10)+t}function s(){tt.forEach(function(t,a){var e=(Math.random()*Y*2-Y)/((Math.random()+2)*t.width)*10,o=t.left+t.width/2-H/2,i=t.top+t.width/2-Q/2;0===o&&(o=a%2?-1:1),0===i&&(i=a%4<2?-1:1);var n=Math.sqrt(o*o+i*i),r=((1-Z)*(1-(t.width-f)/(G-f))+Z)*Math.random();r=1-(1-r)*(1-b/v);var s=(v-n)*r+n,c=n*n,d={finalDistance:s,ratio:r,x:o,y:i,distance:n,translateX:(s-n)*Math.sqrt((c-i*i)/c)*(o>0?1:-1),translateY:(s-n)*Math.sqrt((c-o*o)/c)*(i>0?1:-1),translateX0:(J-H)/2+t.left+t.width/2,translateY0:(K-Q)/2+t.top+t.height/2,finalAngle:e,finalAngleRad:e*(Math.PI/180)};for(var l in d)t[l]=d[l]})}function c(){function t(t,a){return!(t<B[0]&&a>Q-B[0]||t>H-B[1]&&a>Q-B[1]||t>H-B[2]&&a<B[2]||t<B[3]&&a<B[3])}function a(t,a,e,o,i){return(t-e)*(t-e)+(a-o)*(a-o)<i*i}function e(e){var o=e.left,i=e.top,r=e.width,d=e.height,l=o+r/2,h=Q-i-d/2;(c||t(l,h)||B.some(function(t,e){return a(l,h,n[e][0]*H+2*(.5-n[e][0])*t,n[e][1]*Q+2*(.5-n[e][1])*t,t)}))&&s.push({left:o,top:i,width:r,height:d})}function o(t){function a(t){var a=o;if(o+=t,e({left:a,top:i,width:t,height:t}),C)for(var n=1;n<parseInt(G/t);n++)e({left:a,top:i+n*t,width:t,height:t})}var o=0,i=t*G,n=void 0;do n&&a(n),n=r(f,G);while(H>o+n);H-o>=f&&a(H-o)}var i=void 0,n=[[0,1],[1,1],[1,0],[0,0]];i=p?Math.floor(Q/G):Math.ceil(Q/G);for(var s=[],c=B.every(function(t){return 0===t}),d=0;d<i;d++)o(d);return s.sort(function(t,a){return Math.random()>.5?1:-1}),s}function d(){var t=["border-top-left-radius","border-top-right-radius","border-bottom-right-radius","border-bottom-left-radius"],a=L.width();return t=t.map(function(t){var e=L.css(t);return e.match(/px$/)?1*e.match(/^\d+/)[0]:e.match(/%$/)?e.match(/^\d+/)[0]/100*a:e}),t=t.map(function(t){return t>a/2&&(t=a/2),t})}e&&"object"===("undefined"==typeof e?"undefined":_typeof(e))||(e={});var l=e,h=l.minWidth,f=void 0===h?3:h,u=l.omitLastLine,p=void 0!==u&&u,g=l.radius,v=void 0===g?80:g,m=l.minRadius,b=void 0===m?0:m,w=l.release,y=void 0===w||w,x=l.fadeTime,M=void 0===x?300:x,k=l.recycle,I=void 0===k||k,A=l.recycleDelay,P=void 0===A?500:A,R=l.fill,C=void 0===R||R,D=l.explodeTime,E=void 0===D?300:D,S=l.maxAngle,Y=void 0===S?360:S,q=l.gravity,z=void 0===q?0:q,T=l.round,W=void 0!==T&&T,X=l.groundDistance,j=void 0===X?400:X,F=(l.ignoreCompelete,e),G=F.maxWidth,L=this,N=void 0,$=arguments;if(L.length>1)return void L.each(function(){var a=t(this);a.explode.apply(a,$)});if(L.length){if("IMG"===L.prop("tagName")){if(!L.prop("complete"))return void L.on("load",function(){L.explode.apply(L,$)});N=L}else if("none"!==L.css("backgroundImage")){var _=L.css("backgroundImage").match(/url\(\"([\S\s]*)\"\)/)[1];if(N=t("<img/>",{src:_}),!e.ignoreCompelete)return void N.on("load",function(){e.ignoreCompelete=!0,L.explode.apply(L,[e])})}var H=L.width(),Q=L.height(),U=Math.min(H,Q),B=d(),J=Math.max(H,2*v),K=Math.max(Q,2*v,2*j);G||(G=U/4);var O=t("<div></div>",{class:a}),V=["width","height","margin-top","margin-right","margin-bottom","margin-left","position","top","right","bottom","left","float","display"];V.forEach(function(t){O.css(t,L.css(t))}),"static"===O.css("position")&&O.css("position","relative");var Z=.3,tt=c();s();var at=t("<canvas></canvas>"),et=t("<canvas></canvas>");et.css({width:H,height:Q}),et.attr({width:H,height:Q}),at.css({position:"absolute",left:(H-J)/2,right:(H-J)/2,top:(Q-K)/2,bottom:(Q-K)/2,margin:"auto",width:J,height:K}),at.attr({width:J,height:K}),O.append(at);var ot=at[0].getContext("2d"),it=et[0].getContext("2d"),nt=N[0],rt=nt.naturalWidth,st=nt.naturalHeight;if("IMG"===L.prop("tagName"))it.drawImage(N[0],0,0,rt,st,0,0,H,Q);else if("none"!==L.css("backgroundImage")){var ct,dt;!function(){var t=function(t){console.warn("Unsupported "+t+" style:"+n[t])},a=0,e=0,o=rt,i=st,n={"background-repeat":L.css("background-repeat"),"background-size":L.css("background-size"),"background-position-x":L.css("background-position-x"),"background-position-y":L.css("background-position-y")},r=H/rt,s=Q/st;if("cover"===n["background-size"]){var c=Math.max(r,s);o=rt*c,i=st*c}else if("contain"===n["background-size"]){var d=Math.min(r,s);o=rt*d,i=st*d}else t("background-size");if(a=parseInt(n["background-position-x"])/100*(H-o),e=parseInt(n["background-position-y"])/100*(Q-i),"repeat"===n["background-repeat"])for(ct=0-Math.ceil(a/o);ct<H/o+Math.ceil(-a/o);ct++)for(dt=0-Math.ceil(e/i);dt<Q/i+Math.ceil(-e/i);dt++)it.drawImage(N[0],0,0,rt,st,a+ct*o,e+dt*i,o,i);else"no-repeat"===n["background-repeat"]?it.drawImage(N[0],0,0,rt,st,a,e,o,i):t("background-repeat")}()}else"rgba(0, 0, 0, 0)"!==L.css("backgroundColor")?(it.fillStyle=L.css("backgroundColor"),it.fillRect(0,0,H,Q)):console.warn("There's nothing to explode.");tt.forEach(function(t){var a=t.left,e=t.top,o=t.width,i=t.height;t.naturalParams=[a,e,o,i]}),L.after(O),L.prop(a,O),L.detach();var lt=0;n(function(){y?o():I&&i()})}}}(window.jQuery);