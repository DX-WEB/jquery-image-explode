"use strict";function _toConsumableArray(t){if(Array.isArray(t)){for(var a=0,o=Array(t.length);a<t.length;a++)o[a]=t[a];return o}return Array.from(t)}var _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol?"symbol":typeof t};!function(t){t.fn.explode=function(a){function o(t){switch(_.kind){case"image":t.css("background-image",'url("'+_.src+'")');break;case"color":t.css("background-color",""+_.color)}}function n(t,a){return parseInt(Math.random()*(a+1-t),10)+t}function i(){X.forEach(function(t,a){t.finalAngle=(Math.random()*k*2-k)/((Math.random()+2)*t.width)*10;var o=t.left+t.width/2-q/2,n=t.top+t.width/2-C/2;0===o&&(o=a%2?-1:1),0===n&&(n=a%4<2?-1:1);var i=Math.sqrt(o*o+n*n),e=((1-W)*(1-t.width/E)+W)*Math.random(),r=(h-i)*e+i,s=i*i,c=(r-i)*Math.sqrt((s-n*n)/s)*(o>0?1:-1),d=(r-i)*Math.sqrt((s-o*o)/s)*(n>0?1:-1);Object.assign(t,{finalDistance:r,ratio:e,x:o,y:n,distance:i,translateX:c,translateY:d})})}function e(){function t(t){function a(t){var a=i;if(i+=t,o.push({left:a,top:e,width:t,height:t}),w)for(var n=1;n<parseInt(E/t);n++)o.push({left:a,top:e+n*t,width:t,height:t})}var i=0,e=t*E,r=void 0;do r&&a(r),r=n(c,E);while(q>i+r);q-i>=c&&a(q-i)}var a=void 0;a=l?Math.floor(C/E):Math.ceil(C/E);for(var o=[],i=0;i<a;i++)t(i);return o}a&&"object"===("undefined"==typeof a?"undefined":_typeof(a))||(a={});var r=a,s=r.minWidth,c=void 0===s?3:s,d=r.omitLastLine,l=void 0!==d&&d,f=r.radius,h=void 0===f?8:f,u=r.release,p=void 0===u||u,m=r.recycle,v=void 0===m||m,g=r.fill,w=void 0===g||g,y=r.explodeTime,b=void 0===y?300:y,x=r.maxAngle,k=void 0===x?360:x,M=r.canvas,A=void 0===M||M,I=a,E=I.maxWidth,T=this,$=arguments;T.each(function(){var a=t(this);"IMG"===a.prop("tagName")&&(a.prop("complete")||a.on("load",function(){a.explode.apply(a,$)}))});var q=T.width(),C=T.height(),P=Math.min(q,C),_=void 0;_="IMG"===T.prop("tagName")?{kind:"image",src:T.attr("src")}:{kind:"color",color:T.css("background-color")},E||(E=P/4);var D=t("<div></div>",{class:"explode-wrapper"}),S=["width","height","margin-top","margin-right","margin-bottom","margin-left","position","top","right","bottom","left","float","display"];S.forEach(function(t){D.css(t,T.css(t))}),"static"===D.css("position")&&D.css("position","relative");var j=T.css("display"),W=.3,X=e();i();var Y=void 0,z=void 0,F=T[0],G=F.naturalWidth,L=F.naturalHeight,N=Math.max(q,2*h),O=Math.max(C,2*h);A?!function(){Y=t("<canvas></canvas>"),Y.css({position:"absolute",left:-N/2,right:-N/2,top:-O/2,bottom:-O/2,margin:"auto",width:N,height:O}),Y.attr({width:N,height:O}),D.append(Y);var a=q/G,o=C/L;X.forEach(function(t,n){var i,e=t.left,r=t.top,s=t.width,c=t.height;switch(z=Y[0].getContext("2d"),t.naturalParams=[e/a,r/o,s/a,c/o],_.kind){case"image":(i=z).drawImage.apply(i,[T[0]].concat(_toConsumableArray(t.naturalParams),[(N-q)/2+e,(O-C)/2+r,s,c]));break;case"color":}})}():X.forEach(function(a){var n=t("<div></div>",{}),i=a.left,e=a.top,r=a.width;n.css({width:r,height:r,position:"absolute",left:i,top:e,"background-repeat":"no-repeat","background-size":q+"px "+C+"px","background-position":-i+"px "+-e+"px"}),o(n),a.$dom=n,D.append(n)});var H=X.length;A?!function(){var t=function t(){var o=Date.now(),n=(o-a)/b;n>1||(z.clearRect(0,0,N,O),n=Math.sin(n*Math.PI/2),X.forEach(function(t,a){var o,i=t.left,e=t.top,r=t.width,s=t.height;switch(z.save(),z=Y[0].getContext("2d"),_.kind){case"image":z.translate((N-q)/2+t.translateX*n+i+t.width/2,(O-C)/2+t.translateY*n+e+t.height/2),z.rotate(Math.PI/180*t.finalAngle*n),(o=z).drawImage.apply(o,[T[0]].concat(_toConsumableArray(t.naturalParams),[-r/2,-s/2,r,s]));break;case"color":}z.restore()}),window.requestAnimationFrame(t))},a=Date.now();window.requestAnimationFrame(t)}():X.forEach(function(t,a){t.$dom.css("transition",b+"ms all ease-out");var o=(t.finalDistance,t.x,t.y,t.distance,t.ratio);p&&setTimeout(function(){t.$dom.fadeOut({done:function(){t.$dom.remove(),H--,H||(T.css("display",j),T.fadeIn(),D.remove())}})},3e3/o)}),T.hide(),T.after(D),A||(D.css({"background-size":q+"px "+C+"px","background-position":"0px 0px"}),o(D),setTimeout(function(){for(var t in X){var a=X[t];a.$dom.css("transform","translate("+a.translateX+"px,"+a.translateY+"px) rotate("+a.finalAngle+"deg)")}setTimeout(function(){D.css("background-image","none"),v&&setTimeout(function(){for(var t in X){var a=X[t];a.$dom.css("transform","")}setTimeout(function(){T.show(),D.hide()},b)},2*b)})},100))}}(window.jQuery);