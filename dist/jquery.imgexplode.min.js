"use strict";function _toConsumableArray(t){if(Array.isArray(t)){for(var a=0,o=Array(t.length);a<t.length;a++)o[a]=t[a];return o}return Array.from(t)}var _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol?"symbol":typeof t};!function(t){var a="explode-wrapper";t.fn.explodeRestore=function(){this.each(function(){var o=t(this);o.show(),o.next().filter("."+a).remove()})},t.fn.explode=function(o){function n(t){Date.now();R||setTimeout(function(){M&&setTimeout(function(){for(var t in J){var a=J[t];a.$dom.css("transform","")}setTimeout(function(){C.show(),N.hide()},Y)},2*Y)})}function i(t){switch(F.kind){case"image":t.css("background-image",'url("'+F.src+'")');break;case"color":t.css("background-color",""+F.color)}}function e(t){function a(){var t=Date.now(),o=(t-i)/1e3/1;i=t,r+=D*o*3e3,U.clearRect(0,0,G,L),J.forEach(function(t,a){var n;t.biasx+=t.vx*o,t.biasy+=(t.vy+r)*o,t.biasy>t.transYMax&&(t.land||(t.land=1,e--,t.vx=0,t.vy=0),t.biasy=t.transYMax);var i=(t.left,t.top,t.width),s=t.height;U.save(),U.translate(t.biasx,t.biasy),U.rotate(t.finalAngleRad),q&&(U.beginPath(),U.arc(0,0,i/2,0,2*Math.PI,!1),U.closePath(),U.clip()),(n=U).drawImage.apply(n,[C[0]].concat(_toConsumableArray(t.naturalParams),[-i/2,-s/2,i,s])),U.restore()}),e&&window.requestAnimationFrame(a)}function o(){var a=Date.now(),i=(a-n)/Y;return i>1?void(t&&t()):(U.clearRect(0,0,G,L),i=Math.sin(i*Math.PI/2),J.forEach(function(t,a){var o,n=(t.left,t.top,t.width),e=t.height;U.save(),U.translate(t.translateX0+t.translateX*i,t.translateY0+t.translateY*i),U.rotate(t.finalAngleRad*i),(o=U).drawImage.apply(o,[C[0]].concat(_toConsumableArray(t.naturalParams),[-n/2,-e/2,n,e])),U.restore()}),void window.requestAnimationFrame(o))}var n=Date.now(),i=n,e=J.length,r=0;D?(J.forEach(function(t,a){t.vx=t.translateX/Y*1e3,t.vy=t.translateY/Y*1e3,t.biasx=t.translateX0,t.biasy=t.translateY0,t.transYMax=L-t.height/2}),a()):o()}function r(t){J.forEach(function(t,a){t.$dom.css("transition",Y+"ms all ease-out");var o=(t.finalDistance,t.x,t.y,t.distance,t.ratio);w&&setTimeout(function(){t.$dom.fadeOut({done:function(){t.$dom.remove(),at--,at||(C.css("display",Q),C.fadeIn(),N.remove())}})},3e3/o)}),N.css({"background-size":O+"px "+W+"px","background-position":"0px 0px"}),i(N),setTimeout(function(){for(var a in J){var o=J[a];o.$dom.css("transform","translate("+o.translateX+"px,"+o.translateY+"px) rotate("+o.finalAngle+"deg)")}setTimeout(function(){N.css("background-image","none"),setTimeout(function(){t&&t()},Y)})},100)}function s(t,a){return parseInt(Math.random()*(a+1-t),10)+t}function c(){J.forEach(function(t,a){var o=(Math.random()*P*2-P)/((Math.random()+2)*t.width)*10,n=o*(Math.PI/180),i=t.left+t.width/2-O/2,e=t.top+t.width/2-W/2;0===i&&(i=a%2?-1:1),0===e&&(e=a%4<2?-1:1);var r=Math.sqrt(i*i+e*e),s=((1-B)*(1-(t.width-h)/(j-h))+B)*Math.random();s=1-(1-s)*(1-y/m);var c=(m-r)*s+r,d=r*r,l=(c-r)*Math.sqrt((d-e*e)/d)*(i>0?1:-1),f=(c-r)*Math.sqrt((d-i*i)/d)*(e>0?1:-1),u=(G-O)/2+t.left+t.width/2,v=(L-W)/2+t.top+t.height/2,p={finalDistance:c,ratio:s,x:i,y:e,distance:r,translateX:l,translateY:f,translateX0:u,translateY0:v,finalAngleRad:n,finalAngle:o};if(Object.assign)Object.assign(t,p);else for(var a in p)t[a]=p[a]})}function d(){function t(t){function a(t){var a=n;if(n+=t,o.push({left:a,top:i,width:t,height:t}),k)for(var e=1;e<parseInt(j/t);e++)o.push({left:a,top:i+e*t,width:t,height:t})}var n=0,i=t*j,e=void 0;do e&&a(e),e=s(h,j);while(O>n+e);O-n>=h&&a(O-n)}var a=void 0;a=v?Math.floor(W/j):Math.ceil(W/j);for(var o=[],n=0;n<a;n++)t(n);return o}o&&"object"===("undefined"==typeof o?"undefined":_typeof(o))||(o={});var l=o,f=l.minWidth,h=void 0===f?3:f,u=l.omitLastLine,v=void 0!==u&&u,p=l.radius,m=void 0===p?80:p,g=l.minRadius,y=void 0===g?20:g,b=l.release,w=void 0===b||b,x=l.recycle,M=void 0===x||x,A=l.fill,k=void 0===A||A,I=l.explodeTime,Y=void 0===I?300:I,E=l.maxAngle,P=void 0===E?360:E,T=l.canvas,R=void 0===T||T,X=l.gravity,D=void 0!==X&&X,$=l.round,q=void 0!==$&&$,_=o,j=_.maxWidth,C=this,S=arguments;C.each(function(){var a=t(this);"IMG"===a.prop("tagName")&&(a.prop("complete")||a.on("load",function(){a.explode.apply(a,S)}))});var O=C.width(),W=C.height(),z=Math.min(O,W),F=void 0;F="IMG"===C.prop("tagName")?{kind:"image",src:C.attr("src")}:{kind:"color",color:C.css("background-color")};var G=Math.max(O,2*m),L=Math.max(W,2*m);j||(j=z/4);var N=t("<div></div>",{class:a}),H=["width","height","margin-top","margin-right","margin-bottom","margin-left","position","top","right","bottom","left","float","display"];H.forEach(function(t){N.css(t,C.css(t))}),"static"===N.css("position")&&N.css("position","relative");var Q=C.css("display"),B=.3,J=d();c();var K=void 0,U=void 0,V=C[0],Z=V.naturalWidth,tt=V.naturalHeight;R?!function(){K=t("<canvas></canvas>"),K.css({position:"absolute",left:-G/2,right:-G/2,top:-L/2,bottom:-L/2,margin:"auto",width:G,height:L}),K.attr({width:G,height:L}),N.append(K);var a=O/Z,o=W/tt;J.forEach(function(t,n){var i=t.left,e=t.top,r=t.width,s=t.height;U=K[0].getContext("2d"),t.naturalParams=[i/a,e/o,r/a,s/o]})}():J.forEach(function(a){var o=t("<div></div>",{}),n=a.left,e=a.top,r=a.width;o.css({width:r,height:r,position:"absolute",left:n,top:e,"background-repeat":"no-repeat","background-size":O+"px "+W+"px","background-position":-n+"px "+-e+"px"}),i(o),a.$dom=o,N.append(o)});var at=J.length;C.hide(),C.after(N),R?e(n):r(n)}}(window.jQuery);