"use strict";function _toConsumableArray(t){if(Array.isArray(t)){for(var a=0,i=Array(t.length);a<t.length;a++)i[a]=t[a];return i}return Array.from(t)}var _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol?"symbol":typeof t};!function(t){var a="explode-wrapper";t.fn.explodeRestore=function(){this.each(function(){var i=t(this);i.show(),i.siblings().filter("."+a).remove()})},t.fn.explode=function(i){function e(t){function a(){var o=Date.now(),n=o-i;$.clearRect(0,0,B,J),V.forEach(function(t){var a;$.save();var i=t.width,o=t.height;$.translate(t.biasx,t.biasy),$.rotate(t.lastAngle||t.finalAngleRad),k&&($.beginPath(),$.arc(0,0,i/2,0,2*Math.PI,!1),$.closePath(),$.clip());var r=void 0;r=n<t.time1?1:n>t.time2?0:1-(n-t.time1)/M,0!==r||t.released||(t.released=!0,e--),$.globalAlpha=r,(a=$).drawImage.apply(a,[G[0]].concat(_toConsumableArray(t.naturalParams),[-i/2,-o/2,i,o])),$.restore()}),e?window.requestAnimationFrame(a):t&&t()}var i=Date.now(),e=V.length;V.forEach(function(t){t.time1=1e3/(t.ratio*(F+1-t.width)/F+.1),t.time2=t.time1+M}),a()}function o(){setTimeout(function(){n(function(){G.explodeRestore()},!0)},I)}function n(t,a){function i(){var r=Date.now(),s=void 0,l=void 0;if(s=(r-o)/1e3,l=(r-e)/Y,a&&(l=1-l),S)nt+=S*s*300;else{if(l>1||l<0)return void(t&&t());s*=Math.cos(l*Math.PI/2)*Math.PI/2}a&&(s=-s),o=r,$.clearRect(0,0,B,J),V.forEach(function(t){var a;$.save();var i=t.width,e=t.height;t.land||(t.biasx+=t.vx*s,t.biasy+=(t.vy+nt)*s,S&&t.biasy>t.transYMax&&(n--,t.land=!0,t.lastAngle=t.finalAngleRad*l,t.biasy=t.transYMax)),$.translate(t.biasx,t.biasy),t.lastAngle?$.rotate(t.lastAngle):$.rotate(t.finalAngleRad*l),k&&($.beginPath(),$.arc(0,0,i/2,0,2*Math.PI,!1),$.closePath(),$.clip()),(a=$).drawImage.apply(a,[G[0]].concat(_toConsumableArray(t.naturalParams),[-i/2,-e/2,i,e])),$.restore()}),S&&!n?t():window.requestAnimationFrame(i)}var e=Date.now(),o=e,n=V.length;a||V.forEach(function(t,a){t.vx=t.translateX/Y*1e3,t.vy=t.translateY/Y*1e3,t.biasx=t.translateX0,t.biasy=t.translateY0,t.transYMax=J/2+W-t.height/2}),i()}function r(t,a){return parseInt(Math.random()*(a+1-t),10)+t}function s(){V.forEach(function(t,a){var i=(Math.random()*_*2-_)/((Math.random()+2)*t.width)*10,e=i*(Math.PI/180),o=t.left+t.width/2-N/2,n=t.top+t.width/2-H/2;0===o&&(o=a%2?-1:1),0===n&&(n=a%4<2?-1:1);var r=Math.sqrt(o*o+n*n),s=((1-U)*(1-(t.width-c)/(F-c))+U)*Math.random();s=1-(1-s)*(1-g/m);var l=(m-r)*s+r,h=r*r,d=(l-r)*Math.sqrt((h-n*n)/h)*(o>0?1:-1),f=(l-r)*Math.sqrt((h-o*o)/h)*(n>0?1:-1),v=(B-N)/2+t.left+t.width/2,u=(J-H)/2+t.top+t.height/2,p={finalDistance:l,ratio:s,x:o,y:n,distance:r,translateX:d,translateY:f,translateX0:v,translateY0:u,finalAngleRad:e,finalAngle:i};for(var a in p)t[a]=p[a]})}function l(){function t(t){function a(t){var a=e;if(e+=t,i.push({left:a,top:o,width:t,height:t}),D)for(var n=1;n<parseInt(F/t);n++)i.push({left:a,top:o+n*t,width:t,height:t})}var e=0,o=t*F,n=void 0;do n&&a(n),n=r(c,F);while(N>e+n);N-e>=c&&a(N-e)}var a=void 0;a=v?Math.floor(H/F):Math.ceil(H/F);for(var i=[],e=0;e<a;e++)t(e);return i}i&&"object"===("undefined"==typeof i?"undefined":_typeof(i))||(i={});var h=i,d=h.minWidth,c=void 0===d?3:d,f=h.omitLastLine,v=void 0!==f&&f,u=h.radius,m=void 0===u?80:u,p=h.minRadius,g=void 0===p?20:p,y=h.release,w=void 0===y||y,b=h.fadeTime,M=void 0===b?300:b,x=h.recycle,A=void 0===x||x,P=h.recycleDelay,I=void 0===P?500:P,R=h.fill,D=void 0===R||R,E=h.explodeTime,Y=void 0===E?300:E,q=h.maxAngle,_=void 0===q?360:q,C=h.gravity,S=void 0===C?0:C,X=h.round,k=void 0!==X&&X,T=h.groundDistance,W=void 0===T?400:T,j=i,F=j.maxWidth,G=this,L=arguments;G.each(function(){var a=t(this);"IMG"===a.prop("tagName")&&(a.prop("complete")||a.on("load",function(){a.explode.apply(a,L)}))});var N=G.width(),H=G.height(),Q=Math.min(N,H),z=void 0;z="IMG"===G.prop("tagName")?{kind:"image",src:G.attr("src")}:{kind:"color",color:G.css("background-color")};var B=Math.max(N,2*m),J=Math.max(H,2*m,2*W);F||(F=Q/4);var K=t("<div></div>",{class:a}),O=["width","height","margin-top","margin-right","margin-bottom","margin-left","position","top","right","bottom","left","float","display"];O.forEach(function(t){K.css(t,G.css(t))}),"static"===K.css("position")&&K.css("position","relative");var U=(G.css("display"),.3),V=l();s();var Z=void 0,$=void 0,tt=G[0],at=tt.naturalWidth,it=tt.naturalHeight;Z=t("<canvas></canvas>"),Z.css({position:"absolute",left:-B/2,right:-B/2,top:-J/2,bottom:-J/2,margin:"auto",width:B,height:J}),Z.attr({width:B,height:J}),K.append(Z);var et=N/at,ot=H/it;V.forEach(function(t,a){var i=t.left,e=t.top,o=t.width,n=t.height;$=Z[0].getContext("2d"),t.naturalParams=[i/et,e/ot,o/et,n/ot]});V.length;G.hide(),G.after(K);var nt=0;n(function(){w?e():A&&o()})}}(window.jQuery);