/*
 * jquery-image-explode 1.0.7
 * A jQuery explosion plugin.
 * https://github.com/blackmiaool/jquery-image-explode#readme
 *
 * Copyright 2015, blackmiaool
 * Released under the MIT license.
*/

"use strict";var _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol?"symbol":typeof t};!function(t){var a="explode-wrapper";t.fn.explodeRestore=function(){this.each(function(){var e=t(this),i=e.prop(a);i&&(i.replaceWith(e),e.prop(a,null))})},t.fn.explode=function(e){function i(t){function a(){var n=Date.now(),o=n-e;at.clearRect(0,0,B,J),V.forEach(function(t){at.save();var a=t.width,e=t.height;at.translate(t.biasx,t.biasy),at.rotate(t.lastAngle||t.finalAngleRad),C&&(at.beginPath(),at.arc(0,0,a/2,0,2*Math.PI,!1),at.closePath(),at.clip());var n=void 0;n=o<t.time1?1:o>t.time2?0:1-(o-t.time1)/M,0!==n||t.released||(t.released=!0,i--),at.globalAlpha=n,at.drawImage(tt[0],t.left,t.top,t.width,t.height,-a/2,-e/2,a,e),at.restore()}),i?window.requestAnimationFrame(a):t&&t()}var e=Date.now(),i=V.length;V.forEach(function(t){t.time1=1e3/(t.ratio*(_+1-t.width)/_+.1),t.time2=t.time1+M}),a()}function n(){setTimeout(function(){o(function(){G.explodeRestore()},!0)},R)}function o(t,a){function e(){var r=Date.now(),h=void 0,d=void 0;if(h=(r-n)/1e3,d=(r-i)/q,a&&(d=1-d),T)rt+=T*h*300;else{if(d>1||d<0)return void(t&&t());h*=Math.cos(d*Math.PI/2)*Math.PI/2}a&&(h=-h),n=r,at.clearRect(0,0,B,J),V.forEach(function(t){at.save();var a=t.width,e=t.height;t.land||(t.biasx+=t.vx*h,t.biasy+=(t.vy+rt)*h,T&&t.biasy>t.transYMax&&(o--,t.land=!0,t.lastAngle=t.finalAngleRad*d,t.biasy=t.transYMax)),at.translate(t.biasx,t.biasy),t.lastAngle?at.rotate(t.lastAngle):at.rotate(t.finalAngleRad*d),C&&(at.beginPath(),at.arc(0,0,a/2,0,2*Math.PI,!1),at.closePath(),at.clip()),at.drawImage(tt[0],t.left,t.top,t.width,t.height,-a/2,-e/2,a,e),at.restore()}),T&&!o?t():window.requestAnimationFrame(e)}var i=Date.now(),n=i,o=V.length;a||V.forEach(function(t){t.vx=t.translateX/q*1e3,t.vy=t.translateY/q*1e3,t.biasx=t.translateX0,t.biasy=t.translateY0,t.transYMax=J/2+L-t.height/2}),e()}function r(t,a){return parseInt(Math.random()*(a+1-t),10)+t}function h(){V.forEach(function(t,a){var e=(Math.random()*W*2-W)/((Math.random()+2)*t.width)*10,i=t.left+t.width/2-N/2,n=t.top+t.width/2-Q/2;0===i&&(i=a%2?-1:1),0===n&&(n=a%4<2?-1:1);var o=Math.sqrt(i*i+n*n),r=((1-U)*(1-(t.width-f)/(_-f))+U)*Math.random();r=1-(1-r)*(1-w/m);var h=(m-o)*r+o,d=o*o,l={finalDistance:h,ratio:r,x:i,y:n,distance:o,translateX:(h-o)*Math.sqrt((d-n*n)/d)*(i>0?1:-1),translateY:(h-o)*Math.sqrt((d-i*i)/d)*(n>0?1:-1),translateX0:(B-N)/2+t.left+t.width/2,translateY0:(J-Q)/2+t.top+t.height/2,finalAngle:e,finalAngleRad:e*(Math.PI/180)};for(var s in l)t[s]=l[s]})}function d(){function t(t,a){return!(t<z[0]&&a>Q-z[0]||t>N-z[1]&&a>Q-z[1]||t>N-z[2]&&a<z[2]||t<z[3]&&a<z[3])}function a(t,a,e,i,n){return(t-e)*(t-e)+(a-i)*(a-i)<n*n}function e(e){var i=e.left,n=e.top,r=e.width,d=e.height,s=i,c=Q-n;(l||t(s,c)||z.some(function(t,e){return a(s,c,o[e][0]*N+2*(.5-o[e][0])*t,o[e][1]*Q+2*(.5-o[e][1])*t,t)}))&&h.push({left:i,top:n,width:r,height:d})}function i(t){function a(t){var a=i;if(i+=t,e({left:a,top:n,width:t,height:t}),E)for(var o=1;o<parseInt(_/t);o++)e({left:a,top:n+o*t,width:t,height:t})}var i=0,n=t*_,o=void 0;do o&&a(o),o=r(f,_);while(N>i+o);N-i>=f&&a(N-i)}var n=void 0,o=[[0,1],[1,1],[1,0],[0,0]];n=v?Math.floor(Q/_):Math.ceil(Q/_);for(var h=[],d=0;d<n;d++)i(d);var l=z.every(function(t){return 0===t});return h.sort(function(t,a){return Math.random()>.5?1:-1}),h}function l(){var t=["border-top-left-radius","border-top-right-radius","border-bottom-right-radius","border-bottom-left-radius"],a=G.width();return t=t.map(function(t){var e=G.css(t);return e.match(/px$/)?1*e.match(/^\d+/)[0]:e.match(/%$/)?e.match(/^\d+/)[0]/100*a:e})}e&&"object"===("undefined"==typeof e?"undefined":_typeof(e))||(e={});var s=e,c=s.minWidth,f=void 0===c?3:c,u=s.omitLastLine,v=void 0!==u&&u,p=s.radius,m=void 0===p?80:p,g=s.minRadius,w=void 0===g?0:g,y=s.release,b=void 0===y||y,x=s.fadeTime,M=void 0===x?300:x,A=s.recycle,I=void 0===A||A,P=s.recycleDelay,R=void 0===P?500:P,D=s.fill,E=void 0===D||D,Y=s.explodeTime,q=void 0===Y?300:Y,S=s.maxAngle,W=void 0===S?360:S,X=s.gravity,T=void 0===X?0:X,j=s.round,C=void 0!==j&&j,F=s.groundDistance,L=void 0===F?400:F,$=e,_=$.maxWidth,G=this,H=arguments;if(G.length>1)return void G.each(function(){var a=t(this);a.explode.apply(a,H)});if("IMG"===G.prop("tagName")&&!G.prop("complete"))return void G.on("load",function(){G.explode.apply(G,H)});var N=G.width(),Q=G.height(),k=Math.min(N,Q),z=l(),B=Math.max(N,2*m),J=Math.max(Q,2*m,2*L);_||(_=k/4);var K=t("<div></div>",{class:a}),O=["width","height","margin-top","margin-right","margin-bottom","margin-left","position","top","right","bottom","left","float","display"];O.forEach(function(t){K.css(t,G.css(t))}),"static"===K.css("position")&&K.css("position","relative");var U=.3,V=d();h();var Z=t("<canvas></canvas>"),tt=t("<canvas></canvas>");Z.css({position:"absolute",left:(N-B)/2,right:(N-B)/2,top:(Q-J)/2,bottom:(Q-J)/2,margin:"auto",width:B,height:J}),tt.css({width:N,height:Q}),tt.attr({width:N,height:Q}),Z.attr({width:B,height:J}),K.append(Z);var at=Z[0].getContext("2d"),et=tt[0].getContext("2d"),it=G[0],nt=it.naturalWidth,ot=it.naturalHeight;et.drawImage(G[0],0,0,nt,ot,0,0,N,Q);V.forEach(function(t){var a=t.left,e=t.top,i=t.width,n=t.height;t.naturalParams=[a,e,i,n]}),G.after(K),G.prop(a,K),G.detach();var rt=0;o(function(){b?i():I&&n()})}}(window.jQuery);