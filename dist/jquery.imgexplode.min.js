"use strict";function _toConsumableArray(t){if(Array.isArray(t)){for(var a=0,o=Array(t.length);a<t.length;a++)o[a]=t[a];return o}return Array.from(t)}var _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol?"symbol":typeof t};!function(t){t.fn.explode=function(a){function o(t){switch(D.kind){case"image":t.css("background-image",'url("'+D.src+'")');break;case"color":t.css("background-color",""+D.color)}}function n(t,a){return parseInt(Math.random()*(a+1-t),10)+t}function i(){X.forEach(function(t,a){t.finalAngle=(Math.random()*k*2-k)/((Math.random()+2)*t.width)*10;var o=t.left+t.width/2-q/2,n=t.top+t.width/2-C/2;0===o&&(o=a%2?-1:1),0===n&&(n=a%4<2?-1:1);var i=Math.sqrt(o*o+n*n),r=((1-W)*(1-t.width/E)+W)*Math.random(),e=(h-i)*r+i,s=i*i,c=(e-i)*Math.sqrt((s-n*n)/s)*(o>0?1:-1),d=(e-i)*Math.sqrt((s-o*o)/s)*(n>0?1:-1);Object.assign(t,{finalDistance:e,ratio:r,x:o,y:n,distance:i,translateX:c,translateY:d})})}function r(){function t(t){function a(t){var a=i;if(i+=t,o.push({left:a,top:r,width:t,height:t}),y)for(var n=1;n<parseInt(E/t);n++)o.push({left:a,top:r+n*t,width:t,height:t})}var i=0,r=t*E,e=void 0;do e&&a(e),e=n(c,E);while(q>i+e);q-i>=c&&a(q-i)}var a=void 0;a=f?Math.floor(C/E):Math.ceil(C/E);for(var o=[],i=0;i<a;i++)t(i);return o}a&&"object"===("undefined"==typeof a?"undefined":_typeof(a))||(a={});var e=a,s=e.minWidth,c=void 0===s?3:s,d=e.omitLastLine,f=void 0!==d&&d,l=e.radius,h=void 0===l?8:l,u=e.release,p=void 0===u||u,m=e.recycle,v=void 0===m||m,g=e.fill,y=void 0===g||g,w=e.explodeTime,b=void 0===w?300:w,x=e.maxAngle,k=void 0===x?360:x,M=e.canvas,A=void 0===M||M,I=a,E=I.maxWidth,T=this,$=arguments;T.each(function(){var a=t(this);"IMG"===a.prop("tagName")&&(a.prop("complete")||a.on("load",function(){a.explode.apply(a,$)}))});var q=T.width(),C=T.height(),_=Math.min(q,C),D=void 0;D="IMG"===T.prop("tagName")?{kind:"image",src:T.attr("src")}:{kind:"color",color:T.css("background-color")},E||(E=_/4);var P=t("<div></div>",{class:"explode-wrapper"}),S=["width","height","margin-top","margin-right","margin-bottom","margin-left","position","top","right","bottom","left","float","display"];S.forEach(function(t){P.css(t,T.css(t))}),"static"===P.css("position")&&P.css("position","relative");var j=T.css("display"),W=.3,X=r();i();var Y=void 0,z=void 0,F=T[0],G=F.naturalWidth,L=F.naturalHeight,N=Math.max(q,2*h),O=Math.max(C,2*h);A?!function(){Y=t("<canvas></canvas>"),Y.css({position:"absolute",left:-N/2,right:-N/2,top:-O/2,bottom:-O/2,margin:"auto",width:N,height:O}),Y.attr({width:N,height:O}),P.append(Y);var a=q/G,o=C/L;X.forEach(function(t,n){var i,r=t.left,e=t.top,s=t.width,c=t.height;switch(z=Y[0].getContext("2d"),t.naturalParams=[r/a,e/o,s/a,c/o],D.kind){case"image":(i=z).drawImage.apply(i,[T[0]].concat(_toConsumableArray(t.naturalParams),[(N-q)/2+r,(O-C)/2+e,s,c]));break;case"color":}})}():X.forEach(function(a){var n=t("<div></div>",{}),i=a.left,r=a.top,e=a.width;n.css({width:e,height:e,position:"absolute",left:i,top:r,"background-repeat":"no-repeat","background-size":q+"px "+C+"px","background-position":-i+"px "+-r+"px"}),o(n),a.$dom=n,P.append(n)});var H=X.length;A?!function(){var t=function t(){var o=Date.now(),n=(o-a)/b;n>1||(z.clearRect(0,0,N,O),n=Math.sin(n*Math.PI/2),X.forEach(function(t,a){var o,i=t.left,r=t.top,e=t.width,s=t.height;switch(z=Y[0].getContext("2d"),D.kind){case"image":(o=z).drawImage.apply(o,[T[0]].concat(_toConsumableArray(t.naturalParams),[(N-q)/2+t.translateX*n+i,(O-C)/2+t.translateY*n+r,e,s]));break;case"color":}}),window.requestAnimationFrame(t))},a=Date.now();window.requestAnimationFrame(t)}():X.forEach(function(t,a){t.$dom.css("transition",b+"ms all ease-out");var o=(t.finalDistance,t.x,t.y,t.distance,t.ratio);p&&setTimeout(function(){t.$dom.fadeOut({done:function(){t.$dom.remove(),H--,H||(T.css("display",j),T.fadeIn(),P.remove())}})},3e3/o)}),T.hide(),T.after(P),A||(P.css({"background-size":q+"px "+C+"px","background-position":"0px 0px"}),o(P),setTimeout(function(){for(var t in X){var a=X[t];a.$dom.css("transform","translate("+a.translateX+"px,"+a.translateY+"px) rotate("+a.finalAngle+"deg)")}setTimeout(function(){P.css("background-image","none"),v&&setTimeout(function(){for(var t in X){var a=X[t];a.$dom.css("transform","")}setTimeout(function(){T.show(),P.hide()},b)},2*b)})},100))}}(window.jQuery);